[{"user": {"following_url": "https://api.github.com/users/jiangliu/following{/other_user}", "url": "https://api.github.com/users/jiangliu", "site_admin": false, "gists_url": "https://api.github.com/users/jiangliu/gists{/gist_id}", "node_id": "MDQ6VXNlcjE5MzE1MTY=", "starred_url": "https://api.github.com/users/jiangliu/starred{/owner}{/repo}", "gravatar_id": "", "id": 1931516, "events_url": "https://api.github.com/users/jiangliu/events{/privacy}", "avatar_url": "https://avatars0.githubusercontent.com/u/1931516?v=4", "login": "jiangliu", "repos_url": "https://api.github.com/users/jiangliu/repos", "subscriptions_url": "https://api.github.com/users/jiangliu/subscriptions", "followers_url": "https://api.github.com/users/jiangliu/followers", "html_url": "https://github.com/jiangliu", "received_events_url": "https://api.github.com/users/jiangliu/received_events", "type": "User", "organizations_url": "https://api.github.com/users/jiangliu/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/44", "body": "@alexandruag @bonzini Could you please help to review this PR? The vhost crate depends on this PR.", "updated_at": "2019-09-27T02:34:38Z", "url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/comments/535760404", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/vm-memory/pull/44#issuecomment-535760404", "created_at": "2019-09-27T02:34:38Z", "id": 535760404, "node_id": "MDEyOklzc3VlQ29tbWVudDUzNTc2MDQwNA=="}, {"user": {"following_url": "https://api.github.com/users/bonzini/following{/other_user}", "url": "https://api.github.com/users/bonzini", "site_admin": false, "gists_url": "https://api.github.com/users/bonzini/gists{/gist_id}", "node_id": "MDQ6VXNlcjQyMDgy", "starred_url": "https://api.github.com/users/bonzini/starred{/owner}{/repo}", "gravatar_id": "", "id": 42082, "events_url": "https://api.github.com/users/bonzini/events{/privacy}", "avatar_url": "https://avatars2.githubusercontent.com/u/42082?v=4", "login": "bonzini", "repos_url": "https://api.github.com/users/bonzini/repos", "subscriptions_url": "https://api.github.com/users/bonzini/subscriptions", "followers_url": "https://api.github.com/users/bonzini/followers", "html_url": "https://github.com/bonzini", "received_events_url": "https://api.github.com/users/bonzini/received_events", "type": "User", "organizations_url": "https://api.github.com/users/bonzini/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/44", "body": "Let's do this instead:\r\n\r\n* add a `AddressNotAvailable` case to `guest_memory::Error`\r\n\r\n* change both implementations of `get_host_address` so that they return a `Result<*mut u8, GuestMemoryError>` (adding an `.ok_or(InvalidBackendAddress)` to the implementation in GuestMemoryRegion)\r\n\r\n* add a `get_host_address` in GuestMemoryRegion (with a default implementation that is just `Error(AddressNotAvailable)`)\r\n\r\n* move the implementation of `get_host_address` for GuestMemoryMmap up to GuestMemory.", "updated_at": "2019-10-23T12:23:22Z", "url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/comments/545417711", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/vm-memory/pull/44#issuecomment-545417711", "created_at": "2019-10-23T12:23:22Z", "id": 545417711, "node_id": "MDEyOklzc3VlQ29tbWVudDU0NTQxNzcxMQ=="}, {"user": {"following_url": "https://api.github.com/users/jiangliu/following{/other_user}", "url": "https://api.github.com/users/jiangliu", "site_admin": false, "gists_url": "https://api.github.com/users/jiangliu/gists{/gist_id}", "node_id": "MDQ6VXNlcjE5MzE1MTY=", "starred_url": "https://api.github.com/users/jiangliu/starred{/owner}{/repo}", "gravatar_id": "", "id": 1931516, "events_url": "https://api.github.com/users/jiangliu/events{/privacy}", "avatar_url": "https://avatars0.githubusercontent.com/u/1931516?v=4", "login": "jiangliu", "repos_url": "https://api.github.com/users/jiangliu/repos", "subscriptions_url": "https://api.github.com/users/jiangliu/subscriptions", "followers_url": "https://api.github.com/users/jiangliu/followers", "html_url": "https://github.com/jiangliu", "received_events_url": "https://api.github.com/users/jiangliu/received_events", "type": "User", "organizations_url": "https://api.github.com/users/jiangliu/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/44", "body": "> GitHub wants me to leave a comment here too. :)\r\nWe have some di\r\n\r\n\r\n> Let's do this instead:\r\n> \r\n> * add a `AddressNotAvailable` case to `guest_memory::Error`\r\n> * change both implementations of `get_host_address` so that they return a `Result<*mut u8, GuestMemoryError>` (adding an `.ok_or(InvalidBackendAddress)` to the implementation in GuestMemoryRegion)\r\n> * add a `get_host_address` in GuestMemoryRegion (with a default implementation that is just `Error(AddressNotAvailable)`)\r\n> * move the implementation of `get_host_address` for GuestMemoryMmap up to GuestMemory.\r\n\r\nWe have some different thoughts here. \r\nThe proposed HostAddress trait explicitly states that the backend support mmapping guest memory into the vmm process, which is good for consumers to claim dependencies on the HostAddress trait.\r\n\r\n", "updated_at": "2019-10-24T08:39:29Z", "url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/comments/545811493", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/vm-memory/pull/44#issuecomment-545811493", "created_at": "2019-10-24T08:39:29Z", "id": 545811493, "node_id": "MDEyOklzc3VlQ29tbWVudDU0NTgxMTQ5Mw=="}, {"user": {"following_url": "https://api.github.com/users/bonzini/following{/other_user}", "url": "https://api.github.com/users/bonzini", "site_admin": false, "gists_url": "https://api.github.com/users/bonzini/gists{/gist_id}", "node_id": "MDQ6VXNlcjQyMDgy", "starred_url": "https://api.github.com/users/bonzini/starred{/owner}{/repo}", "gravatar_id": "", "id": 42082, "events_url": "https://api.github.com/users/bonzini/events{/privacy}", "avatar_url": "https://avatars2.githubusercontent.com/u/42082?v=4", "login": "bonzini", "repos_url": "https://api.github.com/users/bonzini/repos", "subscriptions_url": "https://api.github.com/users/bonzini/subscriptions", "followers_url": "https://api.github.com/users/bonzini/followers", "html_url": "https://github.com/bonzini", "received_events_url": "https://api.github.com/users/bonzini/received_events", "type": "User", "organizations_url": "https://api.github.com/users/bonzini/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/44", "body": ">  The proposed HostAddress trait explicitly states that the backend support mmapping guest memory into the vmm process, which is good for consumers to claim dependencies on the HostAddress trait.\r\n\r\nThis would be okay for some consumers, but not for those that want to support *some* regions that support `get_host_address` and some that don't. In those systems, using `get_host_address` at all would be ugly.\r\n\r\nIf we agree that `get_host_address` is constant across the lifetime of the region, vhost could still check for `get_host_address` support very early, and return an error if it fails.", "updated_at": "2019-10-24T13:40:59Z", "url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/comments/545923365", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/vm-memory/pull/44#issuecomment-545923365", "created_at": "2019-10-24T13:40:59Z", "id": 545923365, "node_id": "MDEyOklzc3VlQ29tbWVudDU0NTkyMzM2NQ=="}, {"user": {"following_url": "https://api.github.com/users/jiangliu/following{/other_user}", "url": "https://api.github.com/users/jiangliu", "site_admin": false, "gists_url": "https://api.github.com/users/jiangliu/gists{/gist_id}", "node_id": "MDQ6VXNlcjE5MzE1MTY=", "starred_url": "https://api.github.com/users/jiangliu/starred{/owner}{/repo}", "gravatar_id": "", "id": 1931516, "events_url": "https://api.github.com/users/jiangliu/events{/privacy}", "avatar_url": "https://avatars0.githubusercontent.com/u/1931516?v=4", "login": "jiangliu", "repos_url": "https://api.github.com/users/jiangliu/repos", "subscriptions_url": "https://api.github.com/users/jiangliu/subscriptions", "followers_url": "https://api.github.com/users/jiangliu/followers", "html_url": "https://github.com/jiangliu", "received_events_url": "https://api.github.com/users/jiangliu/received_events", "type": "User", "organizations_url": "https://api.github.com/users/jiangliu/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/44", "body": "> > The proposed HostAddress trait explicitly states that the backend support mmapping guest memory into the vmm process, which is good for consumers to claim dependencies on the HostAddress trait.\r\n> \r\n> This would be okay for some consumers, but not for those that want to support _some_ regions that support `get_host_address` and some that don't. In those systems, using `get_host_address` at all would be ugly.\r\n> \r\n> If we agree that `get_host_address` is constant across the lifetime of the region, vhost could still check for `get_host_address` support very early, and return an error if it fails.\r\n\r\nDeal, will update the PR:)", "updated_at": "2019-10-25T06:13:32Z", "url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/comments/546216811", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/vm-memory/pull/44#issuecomment-546216811", "created_at": "2019-10-25T06:13:32Z", "id": 546216811, "node_id": "MDEyOklzc3VlQ29tbWVudDU0NjIxNjgxMQ=="}, {"user": {"following_url": "https://api.github.com/users/jiangliu/following{/other_user}", "url": "https://api.github.com/users/jiangliu", "site_admin": false, "gists_url": "https://api.github.com/users/jiangliu/gists{/gist_id}", "node_id": "MDQ6VXNlcjE5MzE1MTY=", "starred_url": "https://api.github.com/users/jiangliu/starred{/owner}{/repo}", "gravatar_id": "", "id": 1931516, "events_url": "https://api.github.com/users/jiangliu/events{/privacy}", "avatar_url": "https://avatars0.githubusercontent.com/u/1931516?v=4", "login": "jiangliu", "repos_url": "https://api.github.com/users/jiangliu/repos", "subscriptions_url": "https://api.github.com/users/jiangliu/subscriptions", "followers_url": "https://api.github.com/users/jiangliu/followers", "html_url": "https://github.com/jiangliu", "received_events_url": "https://api.github.com/users/jiangliu/received_events", "type": "User", "organizations_url": "https://api.github.com/users/jiangliu/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/44", "body": "\r\n\r\n\r\n> InvalidBackendAddress\r\n\r\nFixed, thanks:)", "updated_at": "2019-10-28T14:28:15Z", "url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/comments/546971554", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/vm-memory/pull/44#issuecomment-546971554", "created_at": "2019-10-28T14:28:15Z", "id": 546971554, "node_id": "MDEyOklzc3VlQ29tbWVudDU0Njk3MTU1NA=="}, {"user": {"following_url": "https://api.github.com/users/jiangliu/following{/other_user}", "url": "https://api.github.com/users/jiangliu", "site_admin": false, "gists_url": "https://api.github.com/users/jiangliu/gists{/gist_id}", "node_id": "MDQ6VXNlcjE5MzE1MTY=", "starred_url": "https://api.github.com/users/jiangliu/starred{/owner}{/repo}", "gravatar_id": "", "id": 1931516, "events_url": "https://api.github.com/users/jiangliu/events{/privacy}", "avatar_url": "https://avatars0.githubusercontent.com/u/1931516?v=4", "login": "jiangliu", "repos_url": "https://api.github.com/users/jiangliu/repos", "subscriptions_url": "https://api.github.com/users/jiangliu/subscriptions", "followers_url": "https://api.github.com/users/jiangliu/followers", "html_url": "https://github.com/jiangliu", "received_events_url": "https://api.github.com/users/jiangliu/received_events", "type": "User", "organizations_url": "https://api.github.com/users/jiangliu/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/44", "body": "> Just change to the right error and I will approve!\r\n\r\nFixed:)", "updated_at": "2019-10-30T12:04:35Z", "url": "https://api.github.com/repos/rust-vmm/vm-memory/issues/comments/547869128", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/vm-memory/pull/44#issuecomment-547869128", "created_at": "2019-10-30T12:04:35Z", "id": 547869128, "node_id": "MDEyOklzc3VlQ29tbWVudDU0Nzg2OTEyOA=="}]