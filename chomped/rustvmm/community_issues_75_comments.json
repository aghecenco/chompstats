[{"user": {"following_url": "https://api.github.com/users/chao-p/following{/other_user}", "url": "https://api.github.com/users/chao-p", "site_admin": false, "gists_url": "https://api.github.com/users/chao-p/gists{/gist_id}", "node_id": "MDQ6VXNlcjExMzczNjUy", "starred_url": "https://api.github.com/users/chao-p/starred{/owner}{/repo}", "gravatar_id": "", "id": 11373652, "events_url": "https://api.github.com/users/chao-p/events{/privacy}", "avatar_url": "https://avatars3.githubusercontent.com/u/11373652?v=4", "login": "chao-p", "repos_url": "https://api.github.com/users/chao-p/repos", "subscriptions_url": "https://api.github.com/users/chao-p/subscriptions", "followers_url": "https://api.github.com/users/chao-p/followers", "html_url": "https://github.com/chao-p", "received_events_url": "https://api.github.com/users/chao-p/received_events", "type": "User", "organizations_url": "https://api.github.com/users/chao-p/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "We implemented this and vfio-pci support in cloud-hypervisor (https://github.com/intel/cloud-hypervisor/tree/master/vfio) and want to push everything there except vfio_pci.rs to this crate. We expect some changes to make the code more generic.", "updated_at": "2019-08-08T10:14:37Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/519458455", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-519458455", "created_at": "2019-08-08T10:14:37Z", "id": 519458455, "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTQ1ODQ1NQ=="}, {"user": {"following_url": "https://api.github.com/users/sameo/following{/other_user}", "url": "https://api.github.com/users/sameo", "site_admin": false, "gists_url": "https://api.github.com/users/sameo/gists{/gist_id}", "node_id": "MDQ6VXNlcjEwNDM4NjM=", "starred_url": "https://api.github.com/users/sameo/starred{/owner}{/repo}", "gravatar_id": "", "id": 1043863, "events_url": "https://api.github.com/users/sameo/events{/privacy}", "avatar_url": "https://avatars2.githubusercontent.com/u/1043863?v=4", "login": "sameo", "repos_url": "https://api.github.com/users/sameo/repos", "subscriptions_url": "https://api.github.com/users/sameo/subscriptions", "followers_url": "https://api.github.com/users/sameo/followers", "html_url": "https://github.com/sameo", "received_events_url": "https://api.github.com/users/sameo/received_events", "type": "User", "organizations_url": "https://api.github.com/users/sameo/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "> Other VFIO crates should use this crate to add specific VFIO implementation support, one example is vfio-pci.\r\n\r\nOne obvious consumer of the `vfio-ioctls` crate would be the PCI based VFIO implementation. I think the `vfio` crate should contain all bus specific implementations (PCI, platform/MMIO, etc). Each bus support could be disabled through a feature.\r\n\r\nSo we'd end up with 3 VFIO related crates:\r\n\r\n1. `vfio-bindings` for the kernel VFIO API bindings.\r\n2. `vfio-ioctls` for the safe wrappers over the VFIO bindings.\r\n3. `vfio` for providing bus specific implementations to create and expose VFIO devices into rust-vmm guests.\r\n\r\n", "updated_at": "2019-08-13T05:43:02Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/520696566", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-520696566", "created_at": "2019-08-13T05:43:02Z", "id": 520696566, "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDY5NjU2Ng=="}, {"user": {"following_url": "https://api.github.com/users/jiangliu/following{/other_user}", "url": "https://api.github.com/users/jiangliu", "site_admin": false, "gists_url": "https://api.github.com/users/jiangliu/gists{/gist_id}", "node_id": "MDQ6VXNlcjE5MzE1MTY=", "starred_url": "https://api.github.com/users/jiangliu/starred{/owner}{/repo}", "gravatar_id": "", "id": 1931516, "events_url": "https://api.github.com/users/jiangliu/events{/privacy}", "avatar_url": "https://avatars0.githubusercontent.com/u/1931516?v=4", "login": "jiangliu", "repos_url": "https://api.github.com/users/jiangliu/repos", "subscriptions_url": "https://api.github.com/users/jiangliu/subscriptions", "followers_url": "https://api.github.com/users/jiangliu/followers", "html_url": "https://github.com/jiangliu", "received_events_url": "https://api.github.com/users/jiangliu/received_events", "type": "User", "organizations_url": "https://api.github.com/users/jiangliu/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "> > Other VFIO crates should use this crate to add specific VFIO implementation support, one example is vfio-pci.\r\n> \r\n> One obvious consumer of the `vfio-ioctls` crate would be the PCI based VFIO implementation. I think the `vfio` crate should contain all bus specific implementations (PCI, platform/MMIO, etc). Each bus support could be disabled through a feature.\r\n> \r\n> So we'd end up with 3 VFIO related crates:\r\n> \r\n> 1. `vfio-bindings` for the kernel VFIO API bindings.\r\n> 2. `vfio-ioctls` for the safe wrappers over the VFIO bindings.\r\n> 3. `vfio` for providing bus specific implementations to create and expose VFIO devices into rust-vmm guests.\r\n\r\nI totally agree with 1 and 2, but have some concerns about 3.\r\nFor example, VFIO devices(maybe PCI or mdev devices) may be used to support PCI device passthrough and Virtio MMIO device passthrough. Instead of a vfio crate to implement both PCI and MMIO device passthrough, I think it may be better to split them into PCI crate and virtio crate.\r\n", "updated_at": "2019-08-13T05:52:02Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/520698287", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-520698287", "created_at": "2019-08-13T05:52:02Z", "id": 520698287, "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDY5ODI4Nw=="}, {"user": {"following_url": "https://api.github.com/users/sameo/following{/other_user}", "url": "https://api.github.com/users/sameo", "site_admin": false, "gists_url": "https://api.github.com/users/sameo/gists{/gist_id}", "node_id": "MDQ6VXNlcjEwNDM4NjM=", "starred_url": "https://api.github.com/users/sameo/starred{/owner}{/repo}", "gravatar_id": "", "id": 1043863, "events_url": "https://api.github.com/users/sameo/events{/privacy}", "avatar_url": "https://avatars2.githubusercontent.com/u/1043863?v=4", "login": "sameo", "repos_url": "https://api.github.com/users/sameo/repos", "subscriptions_url": "https://api.github.com/users/sameo/subscriptions", "followers_url": "https://api.github.com/users/sameo/followers", "html_url": "https://github.com/sameo", "received_events_url": "https://api.github.com/users/sameo/received_events", "type": "User", "organizations_url": "https://api.github.com/users/sameo/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "> For example, VFIO devices(maybe PCI or mdev devices) may be used to support PCI device passthrough and Virtio MMIO device passthrough. Instead of a vfio crate to implement both PCI and MMIO device passthrough, I think it may be better to split them into PCI crate and virtio crate.\r\n\r\nThat's another, orthogonal way to do it. I'm not opposed to it, but what would it bring compared to having a vfio crate for it? With the former you bring a VFIO dependency into both the PCI and virtio crate. The latter builds the dependency tree the other way around: PCI and virtio become a vfio dependency.", "updated_at": "2019-08-13T06:13:19Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/520702939", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-520702939", "created_at": "2019-08-13T06:13:19Z", "id": 520702939, "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDcwMjkzOQ=="}, {"user": {"following_url": "https://api.github.com/users/sameo/following{/other_user}", "url": "https://api.github.com/users/sameo", "site_admin": false, "gists_url": "https://api.github.com/users/sameo/gists{/gist_id}", "node_id": "MDQ6VXNlcjEwNDM4NjM=", "starred_url": "https://api.github.com/users/sameo/starred{/owner}{/repo}", "gravatar_id": "", "id": 1043863, "events_url": "https://api.github.com/users/sameo/events{/privacy}", "avatar_url": "https://avatars2.githubusercontent.com/u/1043863?v=4", "login": "sameo", "repos_url": "https://api.github.com/users/sameo/repos", "subscriptions_url": "https://api.github.com/users/sameo/subscriptions", "followers_url": "https://api.github.com/users/sameo/followers", "html_url": "https://github.com/sameo", "received_events_url": "https://api.github.com/users/sameo/received_events", "type": "User", "organizations_url": "https://api.github.com/users/sameo/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "And it seems we're in agreement with creating the `vfio-ioctls` and `vfio-bindings` crates. So I'm all for creating them.\r\n\r\n@andreeaflorescu are you also fine with that?", "updated_at": "2019-08-13T06:17:33Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/520703945", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-520703945", "created_at": "2019-08-13T06:17:33Z", "id": 520703945, "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDcwMzk0NQ=="}, {"user": {"following_url": "https://api.github.com/users/jiangliu/following{/other_user}", "url": "https://api.github.com/users/jiangliu", "site_admin": false, "gists_url": "https://api.github.com/users/jiangliu/gists{/gist_id}", "node_id": "MDQ6VXNlcjE5MzE1MTY=", "starred_url": "https://api.github.com/users/jiangliu/starred{/owner}{/repo}", "gravatar_id": "", "id": 1931516, "events_url": "https://api.github.com/users/jiangliu/events{/privacy}", "avatar_url": "https://avatars0.githubusercontent.com/u/1931516?v=4", "login": "jiangliu", "repos_url": "https://api.github.com/users/jiangliu/repos", "subscriptions_url": "https://api.github.com/users/jiangliu/subscriptions", "followers_url": "https://api.github.com/users/jiangliu/followers", "html_url": "https://github.com/jiangliu", "received_events_url": "https://api.github.com/users/jiangliu/received_events", "type": "User", "organizations_url": "https://api.github.com/users/jiangliu/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "> And it seems we're in agreement with creating the `vfio-ioctls` and `vfio-bindings` crates. So I'm all for creating them.\r\n> \r\n> @andreeaflorescu are you also fine with that?\r\n\r\nDeal:)\r\nActually I have drafted the vfio-ioctls crate based on code from cloud hypervisor.\r\nThe main change is to support multiple groups per container, multiple device per group:) ", "updated_at": "2019-08-13T06:21:57Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/520704931", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-520704931", "created_at": "2019-08-13T06:21:57Z", "id": 520704931, "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDcwNDkzMQ=="}, {"user": {"following_url": "https://api.github.com/users/sameo/following{/other_user}", "url": "https://api.github.com/users/sameo", "site_admin": false, "gists_url": "https://api.github.com/users/sameo/gists{/gist_id}", "node_id": "MDQ6VXNlcjEwNDM4NjM=", "starred_url": "https://api.github.com/users/sameo/starred{/owner}{/repo}", "gravatar_id": "", "id": 1043863, "events_url": "https://api.github.com/users/sameo/events{/privacy}", "avatar_url": "https://avatars2.githubusercontent.com/u/1043863?v=4", "login": "sameo", "repos_url": "https://api.github.com/users/sameo/repos", "subscriptions_url": "https://api.github.com/users/sameo/subscriptions", "followers_url": "https://api.github.com/users/sameo/followers", "html_url": "https://github.com/sameo", "received_events_url": "https://api.github.com/users/sameo/received_events", "type": "User", "organizations_url": "https://api.github.com/users/sameo/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "> The main change is to support multiple groups per container, multiple device per group:)\r\n\r\nSounds good. I assume you're talking about vfio/src/vfio_device.rs? Are you also adding unit tests? Do you need help with that?", "updated_at": "2019-08-13T11:50:53Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/520803096", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-520803096", "created_at": "2019-08-13T11:50:53Z", "id": 520803096, "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDgwMzA5Ng=="}, {"user": {"following_url": "https://api.github.com/users/jiangliu/following{/other_user}", "url": "https://api.github.com/users/jiangliu", "site_admin": false, "gists_url": "https://api.github.com/users/jiangliu/gists{/gist_id}", "node_id": "MDQ6VXNlcjE5MzE1MTY=", "starred_url": "https://api.github.com/users/jiangliu/starred{/owner}{/repo}", "gravatar_id": "", "id": 1931516, "events_url": "https://api.github.com/users/jiangliu/events{/privacy}", "avatar_url": "https://avatars0.githubusercontent.com/u/1931516?v=4", "login": "jiangliu", "repos_url": "https://api.github.com/users/jiangliu/repos", "subscriptions_url": "https://api.github.com/users/jiangliu/subscriptions", "followers_url": "https://api.github.com/users/jiangliu/followers", "html_url": "https://github.com/jiangliu", "received_events_url": "https://api.github.com/users/jiangliu/received_events", "type": "User", "organizations_url": "https://api.github.com/users/jiangliu/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "Yes, we have copied vfio_device.rs and vfio_ioctls.rs from cloudhypervisor and then made changes to vfio_device.rs. We are thinking about unit tests too, but it's a little hard because it has dependency on PCI hardware. Any good suggestions for unit and CI tests?", "updated_at": "2019-08-13T11:55:35Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/520804397", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-520804397", "created_at": "2019-08-13T11:55:35Z", "id": 520804397, "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDgwNDM5Nw=="}, {"user": {"following_url": "https://api.github.com/users/chao-p/following{/other_user}", "url": "https://api.github.com/users/chao-p", "site_admin": false, "gists_url": "https://api.github.com/users/chao-p/gists{/gist_id}", "node_id": "MDQ6VXNlcjExMzczNjUy", "starred_url": "https://api.github.com/users/chao-p/starred{/owner}{/repo}", "gravatar_id": "", "id": 11373652, "events_url": "https://api.github.com/users/chao-p/events{/privacy}", "avatar_url": "https://avatars3.githubusercontent.com/u/11373652?v=4", "login": "chao-p", "repos_url": "https://api.github.com/users/chao-p/repos", "subscriptions_url": "https://api.github.com/users/chao-p/subscriptions", "followers_url": "https://api.github.com/users/chao-p/followers", "html_url": "https://github.com/chao-p", "received_events_url": "https://api.github.com/users/chao-p/received_events", "type": "User", "organizations_url": "https://api.github.com/users/chao-p/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "Any objection to create this and #74 ?", "updated_at": "2019-09-10T09:00:46Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/529842835", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-529842835", "created_at": "2019-09-10T09:00:46Z", "id": 529842835, "node_id": "MDEyOklzc3VlQ29tbWVudDUyOTg0MjgzNQ=="}, {"user": {"following_url": "https://api.github.com/users/sameo/following{/other_user}", "url": "https://api.github.com/users/sameo", "site_admin": false, "gists_url": "https://api.github.com/users/sameo/gists{/gist_id}", "node_id": "MDQ6VXNlcjEwNDM4NjM=", "starred_url": "https://api.github.com/users/sameo/starred{/owner}{/repo}", "gravatar_id": "", "id": 1043863, "events_url": "https://api.github.com/users/sameo/events{/privacy}", "avatar_url": "https://avatars2.githubusercontent.com/u/1043863?v=4", "login": "sameo", "repos_url": "https://api.github.com/users/sameo/repos", "subscriptions_url": "https://api.github.com/users/sameo/subscriptions", "followers_url": "https://api.github.com/users/sameo/followers", "html_url": "https://github.com/sameo", "received_events_url": "https://api.github.com/users/sameo/received_events", "type": "User", "organizations_url": "https://api.github.com/users/sameo/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "> Any objection to create this and #74 ?\r\n\r\nI'm ok with both.", "updated_at": "2019-09-10T09:10:45Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/529846651", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-529846651", "created_at": "2019-09-10T09:10:45Z", "id": 529846651, "node_id": "MDEyOklzc3VlQ29tbWVudDUyOTg0NjY1MQ=="}, {"user": {"following_url": "https://api.github.com/users/jiangliu/following{/other_user}", "url": "https://api.github.com/users/jiangliu", "site_admin": false, "gists_url": "https://api.github.com/users/jiangliu/gists{/gist_id}", "node_id": "MDQ6VXNlcjE5MzE1MTY=", "starred_url": "https://api.github.com/users/jiangliu/starred{/owner}{/repo}", "gravatar_id": "", "id": 1931516, "events_url": "https://api.github.com/users/jiangliu/events{/privacy}", "avatar_url": "https://avatars0.githubusercontent.com/u/1931516?v=4", "login": "jiangliu", "repos_url": "https://api.github.com/users/jiangliu/repos", "subscriptions_url": "https://api.github.com/users/jiangliu/subscriptions", "followers_url": "https://api.github.com/users/jiangliu/followers", "html_url": "https://github.com/jiangliu", "received_events_url": "https://api.github.com/users/jiangliu/received_events", "type": "User", "organizations_url": "https://api.github.com/users/jiangliu/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "I'm OK with both:)", "updated_at": "2019-09-10T09:13:56Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/529847817", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-529847817", "created_at": "2019-09-10T09:13:56Z", "id": 529847817, "node_id": "MDEyOklzc3VlQ29tbWVudDUyOTg0NzgxNw=="}, {"user": {"following_url": "https://api.github.com/users/sameo/following{/other_user}", "url": "https://api.github.com/users/sameo", "site_admin": false, "gists_url": "https://api.github.com/users/sameo/gists{/gist_id}", "node_id": "MDQ6VXNlcjEwNDM4NjM=", "starred_url": "https://api.github.com/users/sameo/starred{/owner}{/repo}", "gravatar_id": "", "id": 1043863, "events_url": "https://api.github.com/users/sameo/events{/privacy}", "avatar_url": "https://avatars2.githubusercontent.com/u/1043863?v=4", "login": "sameo", "repos_url": "https://api.github.com/users/sameo/repos", "subscriptions_url": "https://api.github.com/users/sameo/subscriptions", "followers_url": "https://api.github.com/users/sameo/followers", "html_url": "https://github.com/sameo", "received_events_url": "https://api.github.com/users/sameo/received_events", "type": "User", "organizations_url": "https://api.github.com/users/sameo/orgs"}, "issue_url": "https://api.github.com/repos/rust-vmm/community/issues/75", "body": "Done, closing that issue.", "updated_at": "2019-09-10T09:15:44Z", "url": "https://api.github.com/repos/rust-vmm/community/issues/comments/529848502", "author_association": "MEMBER", "html_url": "https://github.com/rust-vmm/community/issues/75#issuecomment-529848502", "created_at": "2019-09-10T09:15:44Z", "id": 529848502, "node_id": "MDEyOklzc3VlQ29tbWVudDUyOTg0ODUwMg=="}]